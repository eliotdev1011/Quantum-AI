import{d as D,e as z,f as Z,i as W,n as q,o as G,p as J}from"./chunk-3CJITMZZ.mjs";import{A as F,N as R,ba as o,ea as Y,fa as O,h as B,j as T,l as f,p as j,q as b,r as S,u as k}from"./chunk-VHRDYTPS.mjs";var K;(function(e){e.Fill="fill",e.Contain="contain",e.Cover="cover",e.None="none",e.ScaleDown="scale-down"})(K||(K={}));var Q;(function(e){e.Video="Upload",e.Url="URL"})(Q||(Q={}));function ce(e){let{width:a,height:s,topLeft:c,topRight:p,bottomRight:l,bottomLeft:t,id:u,children:m,...r}=e;return r}function I(e){let a=ce(e);return k(fe,{...a})}function pe(e){let a=O(),s=b(!1),c=T(t=>{if(!e.current)return;let u=(t===1?.999:t)*e.current.duration,m=Math.abs(e.current.currentTime-u)<.1;e.current.duration>0&&!m&&(e.current.currentTime=u)},[]),p=T(()=>{let t=e.current;if(!t)return;t.preload="auto",!(t.currentTime>0&&t.onplaying&&!t.paused&&!t.ended&&t.readyState>t.HAVE_CURRENT_DATA)&&t&&!s.current&&a&&(s.current=!0,t.play().catch(m=>{}).finally(()=>s.current=!1))},[]),l=T(()=>{!e.current||s.current||e.current.pause()},[]);return{play:p,pause:l,setProgress:c}}function me({playingProp:e,muted:a,loop:s,playsinline:c,controls:p}){let[l]=S(()=>e),[t,u]=S(!1);e!==l&&!t&&u(!0);let m=l&&a&&s&&c&&!p&&!t,r;return m?r="on-viewport":l?r="on-mount":r="no-autoplay",r}var X=!1,fe=B(function(a){let{srcType:s,srcFile:c,srcUrl:p,playing:l,muted:t,playsinline:u,controls:m,progress:r,objectFit:ee,backgroundColor:te,onSeeked:C,onPause:P,onPlay:E,onEnd:w,onClick:M,onMouseEnter:ne,onMouseLeave:oe,onMouseDown:re,onMouseUp:ie,poster:se,posterEnabled:A,startTime:N,volume:h,loop:U}=a,i=b(),ae=W(),L=b(null),_=b(null),y=q(),le=G(a),g=y?"no-autoplay":me({playingProp:l,muted:t,loop:U,playsinline:u,controls:m}),H=y?!0:R(i),ue=y?!1:R(i,{margin:"100px",once:!0}),d=N===100?99.9:N,{play:v,pause:V,setProgress:x}=pe(i);f(()=>{y||(l?v():V())},[l]),f(()=>{y||g==="on-viewport"&&(H?v():V())},[g,H]),f(()=>{if(!X){X=!0;return}let n=F(r)?r.get():(r??0)*.01;x((n??0)||(d??0)/100)},[d,c,p,r]),f(()=>{if(F(r))return r.on("change",n=>x(n))},[r]),z(()=>{L.current!==null&&i.current&&(!_&&U||!L.current)&&v()}),Z(()=>{i.current&&(_.current=i.current.ended,L.current=i.current.paused,V())});let de=j(()=>{let n="";if(s==="URL")return p+n;if(s==="Upload")return c+n},[s,c,p,d]);return f(()=>{ae&&i.current&&g==="on-mount"&&setTimeout(()=>v(),50)},[]),f(()=>{i.current&&!t&&(i.current.volume=(h??0)/100)},[h]),k("video",{onClick:M,onMouseEnter:ne,onMouseLeave:oe,onMouseDown:re,onMouseUp:ie,src:de,loop:U,ref:i,onSeeked:n=>C?.(n),onPause:n=>P?.(n),onPlay:n=>E?.(n),onEnded:n=>w?.(n),autoPlay:g==="on-mount",preload:g!=="on-mount"&&A&&!ue?"none":"metadata",poster:A?se:void 0,onLoadedData:()=>{let n=i.current;n&&(n.currentTime<.3&&d>0&&x((d??0)*.01),g==="on-mount"&&v())},controls:m,muted:y?!0:t,playsInline:u,style:{cursor:M?"pointer":"auto",width:"100%",height:"100%",borderRadius:le,display:"block",objectFit:ee,backgroundColor:te,objectPosition:"50% 50%"}})});I.displayName="Video";I.defaultProps={srcType:"URL",srcUrl:"https://assets.mixkit.co/videos/preview/mixkit-shining-sun-in-the-sky-surrounded-by-moving-clouds-31793-small.mp4",srcFile:"",posterEnabled:!1,controls:!1,playing:!0,loop:!0,muted:!0,playsinline:!0,restartOnEnter:!1,objectFit:"cover",backgroundColor:"rgba(0,0,0,0)",radius:0,volume:25,startTime:0};var ye=/[A-Z]{2,}|[A-Z][a-z]+|[a-z]+|[A-Z]|\d+/gu;function ge(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ve(e){return(e.match(ye)||[]).map(ge).join(" ")}var $=["cover","fill","contain","scale-down","none"];Y(I,{srcType:{type:o.Enum,displaySegmentedControl:!0,title:"Source",options:["URL","Upload"]},srcUrl:{type:o.String,title:"URL",placeholder:"../example.mp4",hidden(e){return e.srcType==="Upload"},description:"Hosted video file URL. For YouTube, use the YouTube component."},srcFile:{type:o.File,title:"File",allowedFileTypes:["mp4","webm"],hidden(e){return e.srcType==="URL"}},playing:{type:o.Boolean,title:"Playing",enabledTitle:"Yes",disabledTitle:"No"},posterEnabled:{type:o.Boolean,title:"Poster",enabledTitle:"Yes",disabledTitle:"No"},poster:{type:o.Image,title:" ",hidden:({posterEnabled:e})=>!e},backgroundColor:{type:o.Color,title:"Background"},...J,startTime:{title:"Start Time",type:o.Number,min:0,max:100,step:.1,unit:"%"},loop:{type:o.Boolean,title:"Loop",enabledTitle:"Yes",disabledTitle:"No"},objectFit:{type:o.Enum,title:"Fit",options:$,optionTitles:$.map(ve)},controls:{type:o.Boolean,title:"Controls",enabledTitle:"Show",disabledTitle:"Hide"},muted:{type:o.Boolean,title:"Muted",enabledTitle:"Yes",disabledTitle:"No"},volume:{type:o.Number,max:100,min:0,unit:"%",hidden:({muted:e})=>e},onEnd:{type:o.EventHandler},onSeeked:{type:o.EventHandler},onPause:{type:o.EventHandler},onPlay:{type:o.EventHandler},...D});export{I as a};
//# sourceMappingURL=chunk-Q42XS43Z.mjs.map
